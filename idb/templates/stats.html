{% extends "base.html" %}
{% block content %}

<html>
  <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
      var names = "{{names}}"
      names = names.replace(/&quot;/g, '"');
      names = names.replace(/&#39;/g, "'");
      names = $.parseJSON(names);
      var copies = jQuery.parseJSON('{{copies}}');
      // var items = jQuery.parseJSON('{{items}}');
      // Load the Visualization API and the piechart package.
      google.load('visualization', '1.0', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.setOnLoadCallback(drawChart1);
      // google.setOnLoadCallback(drawChart2);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart1() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Copies');
        for (i = 0; i < copies.length; i++){
        	if (copies[i] != 0){
        		data.addRows([
        			[names[i], copies[i]]
        		]);
        	}
        	
        }

        // Set chart options
        var options = {'title':'Copies of games sold',
                       'width':800,
                       'height':500,
                       'fontName': 'Lato',
                       'backgroundColor': '#272b30',
                       'vAxis': {
                       		'textStyle': {
                       			'color': '#ffffff'
                       		}
                       },
                       'hAxis': {
                       		'textStyle': {
                       			'color': '#ffffff'
                       		}
                       },
                       'legend': {
                       		'textStyle': {
                       			'color': '#ffffff'
                       		}
                       },
                       'titleTextStyle': {
                       		'color': '#ffffff'
                       	}
                   	};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.BarChart(document.getElementById('chart_div1'));
        chart.draw(data, options);
      }

      function drawChart2() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Copies');
        for (i = 0; i < copies.length; i++){
        	if (copies[i] != 0){
        		data.addRows([
        			[names[i], copies[i]]
        		]);
        	}
        	
        }

        // Set chart options
        var options = {'title':'Copies of games sold',
                       'width':800,
                       'height':500,
                       'fontName': 'Lato',
                       'backgroundColor': '#272b30',
                       'vAxis': {
                       		'textStyle': {
                       			'color': '#ffffff'
                       		}
                       },
                       'hAxis': {
                       		'textStyle': {
                       			'color': '#ffffff'
                       		}
                       },
                       'legend': {
                       		'textStyle': {
                       			'color': '#ffffff'
                       		}
                       },
                       'titleTextStyle': {
                       		'color': '#ffffff'
                       	}
                   	};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.BarChart(document.getElementById('chart_div2'));
        chart.draw(data, options);
      }
    </script>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
    <div style="width: 40%;margin: 0 auto">
    	<div id="chart_div1"> </div>
    	<div id="chart_div2"> </div>
    </div>
  </body>
</html>

{% endblock %}